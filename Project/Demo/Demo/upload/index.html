<!doctype html>
<html>

<head>
    <meta charset = 'utf-8'>
</head>

<body>
  <input type="file" accept="image/*" id="fileUpload" />
  <img src="../static/uploadtextimg/timg.jpg">
  <!-- <form>
    <div>
      <label>Select file to upload</label>
      <input type="file">
    </div>
    <button type="submit">Convert</button>
  </form> -->
</body>
<script>
  document.querySelector('#fileUpload').addEventListener('change', event => {
    handleImageUpload(event)
  })
  const handleImageUpload = event => {
    // console.log(event);
    const files = event.target.files
    let formData = new FormData()
    formData.append('image', files[0])
    formData.append('username', '郝天恒')

    let data ={
      textid : 1,
      formData:formData
    }

    console.log(formData.get('image'));

    // fetch('/uploadtextimg', {
    //   method: 'POST',
    //   body: formData
    // })
    // .then(response => response.json())
    // .then(res => {
    //   document.getElementsByTagName('img')[0].src=res
    //   console.log(res)
    // })

    fetch('/uploaduserimg', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(res => {
      document.getElementsByTagName('img')[0].src=res
      console.log(res)
    })
  }
          
</script>

</html>
