<!doctype html>
<html>

<head>
    <meta charset = 'utf-8'>
</head>

<body>
  <input type="file" accept="image/*" id="fileUpload" />
  <img src="">
  <!-- <form>
    <div>
      <label>Select file to upload</label>
      <input type="file">
    </div>
    <button type="submit">Convert</button>
  </form> -->
</body>
<script>
  document.querySelector('#fileUpload').addEventListener('change', event => {
    handleImageUpload(event)
  })
  const handleImageUpload = event => {
    // console.log(event);
    const files = event.target.files
    let formData = new FormData()
    formData.append('image', files[0])

    fetch('/uploadtext', {
      method: 'POST',
      body: formData
    })
    .then(response => response.json())
    .then(res => {
      document.getElementsByTagName('img')[0].src=res
      console.log(res)
    })
  }
  // function fetchupload() {
  //   var formData = new FormData();
  //   var fileField = document.querySelector("input[type='file']");

  //   formData.append('image', fileField.files[0]);

  //   fetch('/uploadtext', {
  //     method: 'POST',
  //     body: formData
  //   })
  //   .then(response => response.json())
  //   .catch(error => console.error('Error:', error))
  //   .then(response => console.log('Success:', response));
  // }
          
</script>

</html>
